[platformio]
default_envs = t-embed-cc1101

[env:t-embed-cc1101]
platform = https://github.com/pioarduino/platform-espressif32/releases/download/55.03.36/platform-espressif32.zip
framework = arduino
board = lilygo-t-embed-cc1101
monitor_speed = 115200
upload_speed = 460800
board_build.arduino.memory_type = qio_opi
board_build.partitions = default_16MB.csv

build_flags =
  -DCORE_DEBUG_LEVEL=1
  -DARDUINO_USB_MODE=1
  -DARDUINO_USB_CDC_ON_BOOT=1
  -DUSER_SETUP_LOADED
  -DST7789_DRIVER=1
  ; Work around TFT_eSPI ESP32-S3 SPI_PORT bug with Arduino core where FSPI macro is 0.
  -DUSE_FSPI_PORT
  ; Keep TFT on default SPI bus: CC1101 also uses SPI.begin(...) on this board.
  -DSMOOTH_FONT=1
  -DTFT_INVERSION_ON
  -DTFT_WIDTH=170
  -DTFT_HEIGHT=320
  ; Backlight is controlled explicitly by app code (GPIO21 PWM/HIGH).
  -DTFT_MISO=10
  -DTFT_MOSI=9
  -DTFT_SCLK=11
  -DTFT_CS=41
  -DTFT_DC=16
  -DTFT_RST=40
  -DSPI_FREQUENCY=40000000
  -DSPI_READ_FREQUENCY=20000000

lib_deps =
  bblanchon/ArduinoJson @ ^6.21.5
  links2004/WebSockets @ ^2.6.1
  sui77/rc-switch @ ^2.6.4
  bodmer/TFT_eSPI @ ^2.5.43
  mathertel/RotaryEncoder @ 1.5.3
  h2zero/NimBLE-Arduino @ ^2.3.7
  lewisxhe/XPowersLib @ ^0.3.3
  rweather/Crypto @ 0.4.0
  https://github.com/bmorcelli/SmartRC-CC1101-Driver-Lib/
